sudo: required

language: generic

env:
  OS: linux

services:
  - docker

branches:
  only:
  - develop

before_install:
  - DEBIAN_FRONTEND=noninteractive sudo apt-get install git
  - git clone https://github.com/sstephenson/bats.git ../bats
  - sudo ../bats/install.sh /usr/local
  - git clone https://github.com/docksal/drupal7.git ../drupal7
  - sudo curl -L https://raw.githubusercontent.com/docksal/docksal/develop/bin/fin -o /usr/local/bin/fin
  - sudo chmod +x /usr/local/bin/fin
  - fin install tools
  - cd ../drupal7
  - fin init
  - fin stop
  - cd ../docksal

script:
  - cd tests
  - bash run-tests.sh
